#
#   ██╗  ██╗██╗   ██╗██████╗ ██████╗ ██╗      █████╗ ███╗   ██╗██████╗ 
#   ██║  ██║╚██╗ ██╔╝██╔══██╗██╔══██╗██║     ██╔══██╗████╗  ██║██╔══██╗
#   ███████║ ╚████╔╝ ██████╔╝██████╔╝██║     ███████║██╔██╗ ██║██║  ██║
#   ██╔══██║  ╚██╔╝  ██╔═══╝ ██╔══██╗██║     ██╔══██║██║╚██╗██║██║  ██║
#   ██║  ██║   ██║   ██║     ██║  ██║███████╗██║  ██║██║ ╚████║██████╔╝
#   ╚═╝  ╚═╝   ╚═╝   ╚═╝     ╚═╝  ╚═╝╚══════╝╚═╝  ╚═╝╚═╝  ╚═══╝╚═════╝ 
#


source = ~/.cache/wal/colors-hyprland.conf


#=================#
###  Variables  ###
#=================#

env = GDK_BACKEND,wayland
env = GTK_THEME,adw-gtk3-dark
env = GTK_ICON_THEME,Papirus-Dark
env = QT_QPA_PLATFORMTHEME,qt5ct
env = QT_STYLE_OVERRIDE,kvantum
env = EDITOR,nvim
env = HYPRCURSOR_SIZE,24
env = XCURSOR_SIZE,24


#================#
###  Monitors  ###
#================#


monitor =  DP-1,  2560x1440@75,  0x0,  1
monitor =  DP-2,  1920x1200@75,  2560x0, 1


#================#
###  Variables ###
#================#


$terminal = kitty
$fileManager = yazi
$menu = rofi -show drun --theme ~/.config/rofi/config.rasi
$mainMod = SUPER


#=================#
###  Autostart  ###
#=================#


exec-once = waybar
exec-once = clipse -listen
exec-once = mako --output "DP-1"
exec-once = hypridle
exec-once = swww-daemon
exec-once = ~/.local/bin/import-gsettings


#===================#
###  Look & Feel  ###
#===================#


general {
    border_size = 2
    col.active_border = $color11
    col.inactive_border = $background

    # Two layouts exist, `master` | `dwindle`
    layout = master

    # Master toggle for window tearing (NOTE: USE WITH CAUTION)
    allow_tearing = true

    resize_on_border = false

    gaps_in = 5
    gaps_out = 15
}

decoration {
    rounding = 6
    rounding_power = 2

    # Change transparency of focused and unfocused windows
    active_opacity = 1.0
    inactive_opacity = 0.9

    blur {
        enabled = true
        size = 10                     # slightly larger blur radius
        passes = 3                    # smoother blur (costs more GPU)
        ignore_opacity = true
        new_optimizations = true
        xray = true                    # speeds up floating window blur
        noise = 0.015                  # a touch more grain for realism
        contrast = 0.95                # slightly boosted contrast
        brightness = 0.82              # balanced brightness
        vibrancy = 0.2                 # mild saturation pop
        vibrancy_darkness = 0.05       # don't overdo dark saturation
        special = false
        popups = true                  # blur menus & popups
        popups_ignorealpha = 0.1
        input_methods = false
        input_methods_ignorealpha = 0.2
    }

    shadow {
        enabled = true
        range = 12                       # bigger shadow spread for depth
        render_power = 3                 # smooth falloff
        sharp = false                     # keep them soft, not hard-edged
        ignore_window = true
        color = 0x881a1a1a                # softer alpha than default
        color_inactive = 0x661a1a1a       # even lighter for inactive windows
        offset = 0 3                      # a tiny downward offset
        scale = 1.0                       # normal scale (can do 0.95 for subtle)
    }
}

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_on_top = true
    new_status = master
}

misc {
    # Enforce any of the 3 default wallpapers. 
    # `0` or `1` disables anime background.
    # -1 means "random".
    # Possible values: -1 | 0 | 1 | 2
    force_default_wallpaper = 0

    # If true disables the Hyprland logo.
    disable_hyprland_logo = true
}


#==================#
###  Animations  ###
#==================#


animations {
    enabled = yes, please :)

    # Default animations, see https://wiki.hypr.land/Configuring/Animations/ for more

    bezier = easeOutQuint,0.23,1,0.32,1
    bezier = easeInOutCubic,0.65,0.05,0.36,1
    bezier = linear,0,0,1,1
    bezier = almostLinear,0.5,0.5,0.75,1.0
    bezier = quick,0.15,0,0.1,1
    bezier = smoothslide, 0.25, 1.0, 0.30, 1.0
    bezier = bouncyslide, 0.2, 1.05, 0.25, 1.0

    animation = global, 1, 10, default
    animation = border, 1, 5.39, easeOutQuint
    animation = windows, 1, 4.79, bouncyslide
    animation = windowsIn, 1, 4.1, bouncyslide, gnomed
    animation = windowsOut, 1, 3.49, linear, gnomed
    animation = fadeIn, 1, 1.73, almostLinear
    animation = fadeOut, 1, 1.46, almostLinear
    animation = fade, 1, 3.03, quick
    animation = layers, 1, 3.81, easeOutQuint
    animation = layersIn, 1, 4, easeOutQuint, fade
    animation = layersOut, 1, 1.5, linear, fade
    animation = fadeLayersIn, 1, 1.79, almostLinear
    animation = fadeLayersOut, 1, 1.39, almostLinear
    animation = workspaces, 1, 2.94, almostLinear, fade
    animation = workspacesIn, 1, 2.75, almostLinear, slidefade
    animation = workspacesOut, 1, 2.75, almostLinear, slidefade
}


#=============#
###  Debug  ###
#=============#


debug {
    disable_logs = false
}


#=============#
###  Input  ###
#=============#


input {
    kb_layout = us
    follow_mouse = 1
    sensitivity = 0 # -1.0 - 1.0, 0 means no modification.
}


#==================#
###  Keybindings ###
#==================#


bind = $mainMod, Return, exec, $terminal
bind = $mainMod, C, killactive,
bind = $mainMod SHIFT, Q, exit,
bind = $mainMod, F, togglefloating,
bind = $mainMod, R, exec, $menu
bind = $mainMod, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle
bind = $mainMod, L, exec, hyprlock --grace 3
bind = $mainMod, V, exec, hyprctl clients | grep -q "class: clipse" || kitty --class clipse -e clipse
bind = $mainMod, W, exec, hyprctl clients | grep -q "class: waypaper" || waypaper
bind = $mainMod, E, exec, hyprctl clients | grep -q "class: floating-selector" || kitty --class="floating-selector" -e bash -c "~/.local/bin/quick-edit"

# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Example special workspace (scratchpad)
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+ && ~/.local/bin/notify-volume
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%- && ~/.local/bin/notify-volume
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle &&
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl -e4 -n2 set 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl -e4 -n2 set 5%-

# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous


#=======================#
###  Workspace Rules  ###
#=======================#


workspace = 1, persistent:true, monitor:DP-1
workspace = 2, persistent:true, monitor:DP-1
workspace = 3, persistent:true, monitor:DP-1

workspace = 4, persistent:true, monitor:DP-2
workspace = 5, persistent:true, monitor:DP-2
workspace = 6, persistent:true, monitor:DP-2


#====================#
###  Window Rules  ###
#====================#


# See https://wiki.hypr.land/Configuring/Window-Rules/ for more
# See https://wiki.hypr.land/Configuring/Workspace-Rules/ for workspace rules

# Example windowrule
# windowrule = float,class:^(kitty)$,title:^(kitty)$

# Ignore maximize requests from apps. You'll probably like this.
windowrule = suppressevent maximize, class:.*

# Fix some dragging issues with XWayland
windowrule = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0

# Bottom (system monitor)
windowrule = float, class:(bottom)
windowrule = size 1000 852, class:(bottom)
windowrule = center, class:(bottom)

# Clipse (clipboard manager)
windowrule = float, class:(clipse)
windowrule = size 622 652, class:(clipse)
windowrule = stayfocused, class:(clipse)

# Firefox
windowrule = immediate, class:(firefox)
windowrule = float, class:(firefox), title:(Extension: .*)
windowrule = center, class:(firefox), title:(Extension: .*)

windowrule = float, class:(firefox), title:(Firefox - Choose User Profile)
windowrule = center, class:(firefox), title:(Firefox - Choose User Profile)

windowrule = float, class:(firefox), title:(Save As)
windowrule = center, class:(firefox), title:(Save As)

windowrule = float, class:(firefox), title:(Open File)
windowrule = center, class:(firefox), title:(Open File)

windowrule = float, class:(firefox), title:(File Upload)
windowrule = center, class:(firefox), title:(File Upload)

windowrule = float, class:(firefox), title:(Picture-in-Picture)
windowrule = center, class:(firefox), title:(Picture-in-Picture)
windowrule = size 1000 563, class:(firefox), title:(Picture-in-Picture)

# LACT
windowrule = float, title:(LACT)
windowrule = center, title:(LACT)
windowrule = size 1000 563, title:(LACT)

# Mpv
windowrule = float, class:(mpv)
windowrule = size 1000 563, class:(mpv)

# Pavucontrol
windowrule = float, class:(org.pulseaudio.pavucontrol)
windowrule = size 856 725, class:(org.pulseaudio.pavucontrol)
windowrule = stayfocused, class:(org.pulseaudio.pavucontrol)

# Steam
windowrule = immediate, class:(steam)
windowrule = immediate, class:(steam_app_.*)
windowrule = monitor DP-1, class:(steam_app_.*)
windowrule = norounding, class:(steam_app_.*)
windowrule = noborder, class:(steam_app_.*)

windowrule = center, title:(Sign in to Steam)

windowrule = float, class:(steam), title:(Friends List)
windowrule = size 622 852, class:(steam), title:(Friends List)
windowrule = center, class:(steam), title:(Friends List)

windowrule = float, class:(steam), title:(Steam Settings)
windowrule = size 950 850, class:(steam), title:(Steam Settings)
windowrule = center, class:(steam), title:(Steam Settings)

# Wine
windowrule = float, class:(wineboot.exe)
windowrule = size 856 725, class:(wineboot.exe)

# Waypaper
windowrule = float, class:(waypaper)
windowrule = size 722 652, class:(waypaper)
windowrule = center, class:(waypaper)

# Idle Inhibit
windowrule = idleinhibit, fullscreen, fullscreen:1
windowrule = idleinhibit, class:(steam_app_.*)

# Quick edits
windowrule = float, class:^(floating-selector)$
windowrule = center, class:^(floating-selector)$
windowrule = size 325 335, class:^(floating-selector)$
windowrule = stayfocused, class:^(floating-selector)$

# Bottles
windowrule = noblur, class:(bottles)
windowrule = nodim, class:(bottles)
windowrule = opaque, class:(bottles)
